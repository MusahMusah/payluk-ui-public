(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bcdcd3e"],{"0edb":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vs-row",[n("vs-col",{staticClass:"mx-auto m-20",attrs:{"vs-w":"12"}},[n("form",{attrs:{id:"payment-form"}},[n("div",{attrs:{id:"card-element"}}),n("button",{attrs:{id:"submit"}},[n("div",{staticClass:"spinner hidden",attrs:{id:"spinner"}}),n("span",{attrs:{id:"button-text"}},[e._v("Pay")])]),n("p",{attrs:{id:"card-error",role:"alert"}}),n("p",{staticClass:"result-message hidden"},[e._v("\n        Payment succeeded, see the result in your\n        "),n("a",{attrs:{href:"",target:"_blank"}},[e._v("Stripe dashboard.")]),e._v(" Refresh the page to\n        pay again.\n      ")])])])],1)},r=[],a={data:function(){return{}},mounted:function(){var e=Stripe("pk_test_KPQoeXoc6SUDHanW1BjtpgpS003CqpjqHx"),t=100*localStorage.getItem("amount"),n={items:[{description:"deposit",amount:t}]};document.querySelector("button").disabled=!0,fetch("https://payluk.com/backend/stripe/invoke",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){var n=e.elements(),r={base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{fontFamily:"Arial, sans-serif",color:"#fa755a",iconColor:"#fa755a"}},a=n.create("card",{style:r});a.mount("#card-element"),a.on("change",(function(e){document.querySelector("button").disabled=e.empty,document.querySelector("#card-error").textContent=e.error?e.error.message:""})),localStorage.removeItem("amount");var c=document.getElementById("payment-form");c.addEventListener("submit",(function(n){n.preventDefault(),o(e,a,t.clientSecret)}))}));var o=function(e,t,n){a(!0),e.confirmCardPayment(n,{payment_method:{card:t}}).then((function(e){e.error?r(e.error.payment_intent.id):r(e.paymentIntent.id)}))},r=function(e){fetch("https://payluk.com/backend/payment?paymentIntent="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e&&(console.log(e.result.receipt_url),localStorage.removeItem("amount"),window.location.href="".concat(e.result.receipt_url),a(!1))})),document.querySelector("button").disabled=!0},a=function(e){e?(document.querySelector("button").disabled=!0,document.querySelector("#spinner").classList.remove("hidden"),document.querySelector("#button-text").classList.add("hidden")):(document.querySelector("button").disabled=!1,document.querySelector("#spinner").classList.add("hidden"),document.querySelector("#button-text").classList.remove("hidden"))}}},c=a,i=(n("1733"),n("2877")),s=Object(i["a"])(c,o,r,!1,null,"803d6286",null);t["default"]=s.exports},"15d1":function(e,t,n){},1733:function(e,t,n){"use strict";var o=n("15d1"),r=n.n(o);r.a}}]);
//# sourceMappingURL=chunk-4bcdcd3e.a08c3aee.js.map