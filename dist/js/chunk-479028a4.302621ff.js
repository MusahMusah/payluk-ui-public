(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-479028a4"],{"38d1":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper",attrs:{id:"app"}},[r("div",{staticClass:"card-form"},[r("div",{staticClass:"card-list"},[r("div",{staticClass:"card-item",class:{"-active":t.isCardFlipped}},[r("div",{staticClass:"card-item__side -front"},[r("div",{ref:"focusElement",staticClass:"card-item__focus",class:{"-active":t.focusElementStyle},style:t.focusElementStyle}),r("div",{staticClass:"card-item__cover"},[r("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),r("div",{staticClass:"card-item__wrapper"},[r("div",{staticClass:"card-item__top"},[r("img",{staticClass:"card-item__chip",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png"}}),r("div",{staticClass:"card-item__type"},[r("transition",{attrs:{name:"slide-fade-up"}})],1)]),t._m(0),r("div",{staticClass:"card-item__content"},[r("h2",{staticClass:"mx-auto text-right text-white",staticStyle:{"font-weight":"bold","font-size":"2.5em"}},[t._v("$"+t._s(t.amount))])])])]),r("div",{staticClass:"card-item__side -back"},[r("div",{staticClass:"card-item__cover"},[r("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),r("div",{staticClass:"card-item__band"}),r("div",{staticClass:"card-item__cvv"},[r("div",{staticClass:"card-item__cvvTitle"},[t._v("CVV")]),r("div",{staticClass:"card-item__cvvBand"},t._l(t.cardCvv,(function(e,a){return r("span",{key:a},[t._v("\n                  *\n                ")])})),0),r("div",{staticClass:"card-item__type"},[t.getCardType?r("img",{staticClass:"card-item__typeImg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.getCardType+".png"}}):t._e()])])])])]),r("div",{staticClass:"card-form__inner"},[r("div",{staticClass:"error red center-align white-text",staticStyle:{color:"red"}},[t._v(t._s(t.stripeValidationError))]),r("div",{staticClass:"card-input"},[r("label",{staticClass:"card-input__label",attrs:{for:"cardNumber"}},[t._v("Card Number")]),r("div",{directives:[{name:"mask",rawName:"v-mask",value:t.generateCardNumberMask,expression:"generateCardNumberMask"}],staticClass:"card-input__input",staticStyle:{height:"2.2em"},attrs:{type:"text",id:"cardNumber",tabindex:"-1","data-ref":"cardNumber",autocomplete:"off"},on:{change:t.changeNumber,focus:t.focusInput,blur:t.blurInput}})]),r("div",{staticClass:"card-input"},[r("label",{staticClass:"card-input__label",attrs:{for:"cardExpiryElement"}},[t._v("Card Expiration Date")]),r("div",{staticClass:"card-input__input",staticStyle:{height:"2.2em"},attrs:{type:"text",id:"cardExpiryElement",placeholder:"MM/YY","data-ref":"cardExpiryElement",autocomplete:"off"},on:{focus:t.focusInput,blur:t.blurInput}})]),r("div",{staticClass:"card-input"},[r("label",{staticClass:"card-input__label",attrs:{for:"cardCvv"}},[t._v("CVC")]),r("div",{directives:[{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],staticClass:"card-input__input",staticStyle:{height:"2.2em"},attrs:{id:"cardCvc",maxlength:"4",autocomplete:"off"},on:{focus:function(e){return t.flipCard(!0)},blur:function(e){return t.flipCard(!1)}}})]),r("vs-button",{staticClass:"card-form__button",attrs:{disabled:t.validateForm},on:{click:t.invokeStripe}},[t._v("\n        Submit\n      ")])],1)])])},i=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-item__content"},[r("h2",{staticClass:"mx-auto text-right text-white",staticStyle:{"font-weight":"bold","font-size":"2em"}},[t._v("Amount To Deposit")])])}],n=(r("96cf"),r("1da1")),s=(r("4917"),r("3b2b"),r("a481"),r("bc3a")),c=r.n(s),o={data:function(){return{stripe:null,cardNumberElement:null,cardExpiryElement:null,cardCVCElement:null,stripeValidationError:"",amount:localStorage.getItem("amount"),purchase:{items:[{description:"deposit",amount:100*localStorage.getItem("amount")}]},clientSecret:null,currentCardBackground:Math.floor(25*Math.random()+1),cardName:"",cardNumber:"",cardMonth:"",cardYear:"",cardCvv:"",minCardYear:(new Date).getFullYear(),amexCardMask:"#### ###### #####",otherCardMask:"#### #### #### ####",cardNumberTemp:"",isCardFlipped:!1,focusElementStyle:null,isInputFocused:!1}},created:function(){localStorage.getItem("amount")||this.$router.replace({name:"dashboard-analytics"}).catch((function(t){console.log(t)}))},mounted:function(){var t=this;this.stripe=Stripe("pk_test_KPQoeXoc6SUDHanW1BjtpgpS003CqpjqHx"),this.initStripe(this.purchase).then((function(e){t.createAndMountFormElements(),t.clientSecret=e.data.clientSecret})),this.cardNumberTemp=this.otherCardMask,document.getElementById("cardNumber").focus()},computed:{validateForm:function(){if(""!=this.stripeValidationError)return this.stripeValidationError},getCardType:function(){var t=this.cardNumber,e=new RegExp("^4");return null!=t.match(e)?"visa":(e=new RegExp("^(34|37)"),null!=t.match(e)?"amex":(e=new RegExp("^5[1-5]"),null!=t.match(e)?"mastercard":(e=new RegExp("^6011"),null!=t.match(e)?"discover":(e=new RegExp("^9792"),null!=t.match(e)?"troy":"visa"))))},generateCardNumberMask:function(){return"amex"===this.getCardType?this.amexCardMask:this.otherCardMask},minCardMonth:function(){return this.cardYear===this.minCardYear?(new Date).getMonth()+1:1}},watch:{cardYear:function(){this.cardMonth<this.minCardMonth&&(this.cardMonth="")}},methods:{initStripe:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c()({method:"post",url:"https://payluk.com/backend/stripe/invoke",data:JSON.stringify(e)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),createAndMountFormElements:function(){var t=this.stripe.elements();this.cardNumberElement=t.create("cardNumber"),this.cardNumberElement.mount("#cardNumber"),this.cardExpiryElement=t.create("cardExpiry"),this.cardExpiryElement.mount("#cardExpiryElement"),this.cardCvcElement=t.create("cardCvc"),this.cardCvcElement.mount("#cardCvc"),this.cardNumberElement.on("change",this.setValidationError),this.cardExpiryElement.on("change",this.setValidationError),this.cardCvcElement.on("change",this.setValidationError)},setValidationError:function(t){this.stripeValidationError=t.error?t.error.message:""},try:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c()({method:"get",url:"https://payluk.com/backend/payment?paymentIntent="+e,headers:{"Content-Type":"application/json"}}).then((function(t){r.$vs.loading.close(),r.$vs.notify({title:"Success",text:"Payment Successfully Initiated",position:"top-right",iconPack:"feather",icon:"icon-alert-circle",color:"success"}),window.location.href="".concat(t.data.result.receipt_url)})).catch((function(){r.$vs.loading.close(),r.$vs.notify({title:"Error",text:"Transaction Failed",position:"top-right",iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),invokeStripe:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$vs.loading(),t.next=3,this.stripe.confirmCardPayment(this.clientSecret,{payment_method:{card:this.cardNumberElement}});case 3:e=t.sent,!this.stripeValidationError&&e.paymentIntent||(this.$vs.loading.close(),this.$vs.notify({title:"Error",text:"Please Fill in all the fields",position:"top-right",iconPack:"feather",icon:"icon-alert-circle",color:"danger"})),"succeeded"==e.paymentIntent.status?(localStorage.removeItem("amount"),this.try(e.paymentIntent.id)):(localStorage.removeItem("amount"),this.$vs.loading.close(),this.$vs.notify({title:"Error",text:"Error Occured",position:"top-right",iconPack:"feather",icon:"icon-alert-circle",color:"danger"}),this.try(e.error));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeNumber:function(t){this.cardNumber=t.target.value;var e=this.cardNumber.replace(/\D/g,"");if(/^3[47]\d{0,13}$/.test(e)?(this.cardNumber=e.replace(/(\d{4})/,"$1 ").replace(/(\d{4}) (\d{6})/,"$1 $2 "),this.cardNumberMaxLength=17):/^3(?:0[0-5]|[68]\d)\d{0,11}$/.test(e)?(this.cardNumber=e.replace(/(\d{4})/,"$1 ").replace(/(\d{4}) (\d{6})/,"$1 $2 "),this.cardNumberMaxLength=16):/^\d{0,16}$/.test(e)&&(this.cardNumber=e.replace(/(\d{4})/,"$1 ").replace(/(\d{4}) (\d{4})/,"$1 $2 ").replace(/(\d{4}) (\d{4}) (\d{4})/,"$1 $2 $3 "),this.cardNumberMaxLength=19),"deleteContentBackward"==t.inputType){var r=this.cardNumber.substring(this.cardNumber.length,this.cardNumber.length-1);" "==r&&(this.cardNumber=this.cardNumber.substring(0,this.cardNumber.length-1))}this.$emit("input-card-number",this.cardNumber)},flipCard:function(t){this.isCardFlipped=t},focusInput:function(t){this.isInputFocused=!0;var e=t.target.dataset.ref,r=this.$refs[e];this.focusElementStyle={width:"".concat(r.offsetWidth,"px"),height:"".concat(r.offsetHeight,"px"),transform:"translateX(".concat(r.offsetLeft,"px) translateY(").concat(r.offsetTop,"px)")}},blurInput:function(){var t=this;setTimeout((function(){t.isInputFocused||(t.focusElementStyle=null)}),300),t.isInputFocused=!1}},beforeDestroy:function(){localStorage.removeItem("amount")}},d=o,u=(r("aeed"),r("2877")),l=Object(u["a"])(d,a,i,!1,null,null,null);e["default"]=l.exports},"3b2b":function(t,e,r){var a=r("7726"),i=r("5dbc"),n=r("86cc").f,s=r("9093").f,c=r("aae3"),o=r("0bfb"),d=a.RegExp,u=d,l=d.prototype,m=/a/g,p=/a/g,h=new d(m)!==m;if(r("9e1e")&&(!h||r("79e5")((function(){return p[r("2b4c")("match")]=!1,d(m)!=m||d(p)==p||"/a/i"!=d(m,"i")})))){d=function(t,e){var r=this instanceof d,a=c(t),n=void 0===e;return!r&&a&&t.constructor===d&&n?t:i(h?new u(a&&!n?t.source:t,e):u((a=t instanceof d)?t.source:t,a&&n?o.call(t):e),r?this:l,d)};for(var f=function(t){t in d||n(d,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},v=s(u),g=0;v.length>g;)f(v[g++]);l.constructor=d,d.prototype=l,r("2aba")(a,"RegExp",d)}r("7a56")("RegExp")},"9c6a":function(t,e,r){},aeed:function(t,e,r){"use strict";var a=r("9c6a"),i=r.n(a);i.a}}]);
//# sourceMappingURL=chunk-479028a4.302621ff.js.map