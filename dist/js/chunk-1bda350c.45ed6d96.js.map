{"version":3,"sources":["webpack:///./src/views/deposit/DepositPay.vue?92b4","webpack:///src/views/deposit/DepositPay.vue","webpack:///./src/views/deposit/DepositPay.vue?85f6","webpack:///./src/views/deposit/DepositPay.vue","webpack:///./src/views/deposit/DepositPay.vue?a408"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","staticRenderFns","data","created","localStorage","getItem","$router","replace","mounted","stripe","Stripe","amount","purchase","items","document","querySelector","disabled","fetch","method","headers","Authorization","body","JSON","stringify","payWithCard","loading","orderComplete","paymentIntentId","isLoading","classList","remove","add","component"],"mappings":"kJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,YAAY,eAAeC,MAAM,CAAC,OAAO,OAAO,CAACH,EAAG,OAAO,CAACG,MAAM,CAAC,GAAK,iBAAiB,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,kBAAkBH,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,WAAW,CAACH,EAAG,MAAM,CAACE,YAAY,iBAAiBC,MAAM,CAAC,GAAK,aAAaH,EAAG,OAAO,CAACG,MAAM,CAAC,GAAK,gBAAgB,CAACP,EAAIQ,GAAG,WAAWJ,EAAG,IAAI,CAACG,MAAM,CAAC,GAAK,aAAa,KAAO,WAAWH,EAAG,IAAI,CAACE,YAAY,yBAAyB,CAACN,EAAIQ,GAAG,iEAAiEJ,EAAG,IAAI,CAACG,MAAM,CAAC,KAAO,GAAG,OAAS,WAAW,CAACP,EAAIQ,GAAG,uBAAuBR,EAAIQ,GAAG,2DAA2D,IAC9sBC,EAAkB,GCqBtB,G,UAAA,CACEC,KADF,WAEI,MAAO,IAETC,QAJF,WAKSC,aAAaC,QAAQ,WACxBZ,KAAKa,QAAQC,QAAQ,CAA3B,mEAGEC,QATF,WAWI,IAAIC,EAASC,OAAO,8CAEhBC,EAA0C,IAAjCP,aAAaC,QAAQ,UAE9BO,EAAW,CACbC,MAAO,CACb,CACQ,YAAR,UACQ,OAAR,KAMIC,SAASC,cAAc,UAAUC,UAAW,EAC5CC,MAAM,2CAA4C,CAChDC,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAvB,uCAEMC,KAAMC,KAAKC,UAAUX,KAE3B,kBACM,OAAN,YAEA,kBACM,IAAN,eAEA,GACQ,KAAR,CACU,MAAV,UACU,WAAV,oBACU,cAAV,cACU,SAAV,OACU,gBAAV,CACY,MAAZ,YAGQ,QAAR,CACU,WAAV,oBACU,MAAV,UACU,UAAV,YAGA,mBAAQ,MAAR,IAEM,EAAN,uBAEM,EAAN,yBAEQ,SAAR,yCACQ,SAAR,iDACA,gBACA,MAEM,aAAN,qBACM,IAAN,0CACM,EAAN,uCACQ,EAAR,iBAEQ,EAAR,0BAOI,IAAIY,EAAc,SAAtB,OACMC,GAAQ,GAERhB,EACN,sBACQ,eAAR,CACU,KAAV,KAGA,kBACA,QAEU,EAAV,2BAGU,EAAV,wBASQiB,EAAgB,SAAxB,GAEMT,MAAM,oDAAsDU,EAAiB,CAC3ET,OAAQ,MACRC,QAAS,CACP,eAAgB,sBAG1B,kBACQ,OAAR,YAEA,kBACA,IACU,QAAV,0BACU,aAAV,qBAEU,OAAV,8CAEU,GAAV,OAIML,SAASC,cAAc,UAAUC,UAAW,GAI1CS,EAAU,SAAlB,GACUG,GAEFd,SAASC,cAAc,UAAUC,UAAW,EAC5CF,SAASC,cAAc,YAAYc,UAAUC,OAAO,UACpDhB,SAASC,cAAc,gBAAgBc,UAAUE,IAAI,YAErDjB,SAASC,cAAc,UAAUC,UAAW,EAC5CF,SAASC,cAAc,YAAYc,UAAUE,IAAI,UACjDjB,SAASC,cAAc,gBAAgBc,UAAUC,OAAO,eChKmS,I,wBCQ/VE,EAAY,eACd,EACAzC,EACAU,GACA,EACA,KACA,WACA,MAIa,aAAA+B,E,6CCnBf,yBAAwf,EAAG","file":"js/chunk-1bda350c.45ed6d96.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('vs-row',[_c('vs-col',{staticClass:\"mx-auto m-20\",attrs:{\"vs-w\":\"12\"}},[_c('form',{attrs:{\"id\":\"payment-form\"}},[_c('div',{attrs:{\"id\":\"card-element\"}}),_c('button',{attrs:{\"id\":\"submit\"}},[_c('div',{staticClass:\"spinner hidden\",attrs:{\"id\":\"spinner\"}}),_c('span',{attrs:{\"id\":\"button-text\"}},[_vm._v(\"Pay\")])]),_c('p',{attrs:{\"id\":\"card-error\",\"role\":\"alert\"}}),_c('p',{staticClass:\"result-message hidden\"},[_vm._v(\"\\n        Payment succeeded, see the result in your\\n        \"),_c('a',{attrs:{\"href\":\"\",\"target\":\"_blank\"}},[_vm._v(\"Stripe dashboard.\")]),_vm._v(\" Refresh the page to\\n        pay again.\\n      \")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <vs-row>\r\n    <vs-col vs-w=\"12\" class=\"mx-auto m-20\">\r\n      <form id=\"payment-form\">\r\n        <div id=\"card-element\"><!--Stripe.js injects the Card Element--></div>\r\n        <button id=\"submit\">\r\n          <div class=\"spinner hidden\" id=\"spinner\"></div>\r\n          <span id=\"button-text\">Pay</span>\r\n        </button>\r\n        <p id=\"card-error\" role=\"alert\"></p>\r\n        <p class=\"result-message hidden\">\r\n          Payment succeeded, see the result in your\r\n          <a href=\"\" target=\"_blank\">Stripe dashboard.</a> Refresh the page to\r\n          pay again.\r\n        </p>\r\n      </form>\r\n    </vs-col>\r\n  </vs-row>\r\n</template>\r\n\r\n<script>\r\n// import \"@/assets/stripe/css/global.css\";\r\nexport default {\r\n  data() {\r\n    return {};\r\n  },\r\n  created(){\r\n    if (!localStorage.getItem(\"amount\")) {\r\n      this.$router.replace({name:'dashboard-analytics'}).catch((err) => { console.log(err)})\r\n    }\r\n  },\r\n  mounted() {\r\n    // A reference to Stripe.js initialized with your real test publishable API key.\r\n    var stripe = Stripe(\"pk_test_KPQoeXoc6SUDHanW1BjtpgpS003CqpjqHx\");\r\n    // var amount = this.$route.params.amount * 100;\r\n    var amount = localStorage.getItem(\"amount\") * 100;\r\n    // The items the customer wants to buy\r\n    var purchase = {\r\n      items: [\r\n        {\r\n          description: \"deposit\",\r\n          amount: amount,\r\n        },\r\n      ],\r\n    };\r\n\r\n    // Disable the button until we have Stripe set up on the page\r\n    document.querySelector(\"button\").disabled = true;\r\n    fetch(\"https://payluk.com/backend/stripe/invoke\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n      body: JSON.stringify(purchase),\r\n    })\r\n      .then(function (result) {\r\n        return result.json();\r\n      })\r\n      .then(function (data) {\r\n        var elements = stripe.elements();\r\n\r\n        var style = {\r\n          base: {\r\n            color: \"#32325d\",\r\n            fontFamily: \"Arial, sans-serif\",\r\n            fontSmoothing: \"antialiased\",\r\n            fontSize: \"16px\",\r\n            \"::placeholder\": {\r\n              color: \"#32325d\",\r\n            },\r\n          },\r\n          invalid: {\r\n            fontFamily: \"Arial, sans-serif\",\r\n            color: \"#fa755a\",\r\n            iconColor: \"#fa755a\",\r\n          },\r\n        };\r\n        var card = elements.create(\"card\", { style: style });\r\n        // Stripe injects an iframe into the DOM\r\n        card.mount(\"#card-element\");\r\n\r\n        card.on(\"change\", function (event) {\r\n          // Disable the Pay button if there are no card details in the Element\r\n          document.querySelector(\"button\").disabled = event.empty;\r\n          document.querySelector(\"#card-error\").textContent = event.error\r\n            ? event.error.message\r\n            : \"\";\r\n        });\r\n        localStorage.removeItem(\"amount\");\r\n        var form = document.getElementById(\"payment-form\");\r\n        form.addEventListener(\"submit\", function (event) {\r\n          event.preventDefault();\r\n          // Complete payment when the submit button is clicked\r\n          payWithCard(stripe, card, data.clientSecret);\r\n        });\r\n      });\r\n\r\n    // Calls stripe.confirmCardPayment\r\n    // If the card requires authentication Stripe shows a pop-up modal to\r\n    // prompt the user to enter authentication details without leaving your page.\r\n    var payWithCard = function (stripe, card, clientSecret) {\r\n      loading(true);\r\n      // this.$vs.loading();\r\n      stripe\r\n        .confirmCardPayment(clientSecret, {\r\n          payment_method: {\r\n            card: card,\r\n          },\r\n        })\r\n        .then(function (result) {\r\n          if (result.error) {\r\n            // Show error to your customer\r\n            orderComplete(result.error.payment_intent.id);\r\n          } else {\r\n            // The payment succeeded!\r\n            orderComplete(result.paymentIntent.id);\r\n\r\n          }\r\n        });\r\n    };\r\n\r\n    /* ------- UI helpers ------- */\r\n\r\n    // Shows a success message when the payment is complete\r\n    var orderComplete = function (paymentIntentId) {\r\n      //loading(true);\r\n      fetch(\"https://payluk.com/backend/payment?paymentIntent=\" + paymentIntentId, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then(function (result) {\r\n          return result.json();\r\n        })\r\n        .then(function (data) {\r\n          if (data) {\r\n            console.log(data.result.receipt_url);\r\n            localStorage.removeItem(\"amount\");\r\n            // Redirect to Receipt Page\r\n            window.location.href = `${data.result.receipt_url}`;\r\n            //  this.$vs.loading.close();\r\n            loading(false);\r\n          }\r\n        });\r\n\r\n      document.querySelector(\"button\").disabled = true;\r\n    };\r\n\r\n    // Show a spinner on payment submission\r\n    var loading = function (isLoading) {\r\n      if (isLoading) {\r\n        // Disable the button and show a spinner\r\n        document.querySelector(\"button\").disabled = true;\r\n        document.querySelector(\"#spinner\").classList.remove(\"hidden\");\r\n        document.querySelector(\"#button-text\").classList.add(\"hidden\");\r\n      } else {\r\n        document.querySelector(\"button\").disabled = false;\r\n        document.querySelector(\"#spinner\").classList.add(\"hidden\");\r\n        document.querySelector(\"#button-text\").classList.remove(\"hidden\");\r\n      }\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n/* Variables */\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* body {\r\n  font-family: -apple-system, BlinkMacSystemFont, sans-serif;\r\n  font-size: 16px;\r\n  -webkit-font-smoothing: antialiased;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n  height: 100vh;\r\n  width: 100vw;\r\n} */\r\n\r\nform {\r\n  /* width: 30vw; */\r\n  /* min-width: 500px; */\r\n  align-self: center;\r\n  box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),\r\n    0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);\r\n  border-radius: 7px;\r\n  padding: 40px;\r\n}\r\n\r\ninput {\r\n  border-radius: 6px;\r\n  margin-bottom: 6px;\r\n  padding: 12px;\r\n  border: 1px solid rgba(50, 50, 93, 0.1);\r\n  height: 44px;\r\n  font-size: 16px;\r\n  width: 100%;\r\n  background: white;\r\n}\r\n\r\n.result-message {\r\n  line-height: 22px;\r\n  font-size: 16px;\r\n}\r\n\r\n.result-message a {\r\n  color: rgb(89, 111, 214);\r\n  font-weight: 600;\r\n  text-decoration: none;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n#card-error {\r\n  color: rgb(105, 115, 134);\r\n  text-align: left;\r\n  font-size: 13px;\r\n  line-height: 17px;\r\n  margin-top: 12px;\r\n}\r\n\r\n#card-element {\r\n  border-radius: 4px 4px 0 0;\r\n  /* padding: 12px; */\r\n  border: 1px solid rgba(50, 50, 93, 0.1);\r\n  height: 44px;\r\n  width: 100%;\r\n  background: white;\r\n}\r\n\r\n#payment-request-button {\r\n  margin-bottom: 32px;\r\n}\r\n\r\n/* Buttons and links */\r\nbutton {\r\n  background: #5469d4;\r\n  color: #ffffff;\r\n  font-family: Arial, sans-serif;\r\n  border-radius: 0 0 4px 4px;\r\n  border: 0;\r\n  padding: 12px 16px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: block;\r\n  transition: all 0.2s ease;\r\n  box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\r\n  width: 100%;\r\n}\r\nbutton:hover {\r\n  filter: contrast(115%);\r\n}\r\nbutton:disabled {\r\n  opacity: 0.5;\r\n  cursor: default;\r\n}\r\n\r\n/* spinner/processing state, errors */\r\n.spinner,\r\n.spinner:before,\r\n.spinner:after {\r\n  border-radius: 50%;\r\n}\r\n.spinner {\r\n  color: #ffffff;\r\n  font-size: 22px;\r\n  text-indent: -99999px;\r\n  margin: 0px auto;\r\n  position: relative;\r\n  width: 20px;\r\n  height: 20px;\r\n  box-shadow: inset 0 0 0 2px;\r\n  -webkit-transform: translateZ(0);\r\n  -ms-transform: translateZ(0);\r\n  transform: translateZ(0);\r\n}\r\n.spinner:before,\r\n.spinner:after {\r\n  position: absolute;\r\n  content: \"\";\r\n}\r\n.spinner:before {\r\n  width: 10.4px;\r\n  height: 20.4px;\r\n  background: #5469d4;\r\n  border-radius: 20.4px 0 0 20.4px;\r\n  top: -0.2px;\r\n  left: -0.2px;\r\n  -webkit-transform-origin: 10.4px 10.2px;\r\n  transform-origin: 10.4px 10.2px;\r\n  -webkit-animation: loading 2s infinite ease 1.5s;\r\n  animation: loading 2s infinite ease 1.5s;\r\n}\r\n.spinner:after {\r\n  width: 10.4px;\r\n  height: 10.2px;\r\n  background: #5469d4;\r\n  border-radius: 0 10.2px 10.2px 0;\r\n  top: -0.1px;\r\n  left: 10.2px;\r\n  -webkit-transform-origin: 0px 10.2px;\r\n  transform-origin: 0px 10.2px;\r\n  -webkit-animation: loading 2s infinite ease;\r\n  animation: loading 2s infinite ease;\r\n}\r\n\r\n@-webkit-keyframes loading {\r\n  0% {\r\n    -webkit-transform: rotate(0deg);\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    -webkit-transform: rotate(360deg);\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n@keyframes loading {\r\n  0% {\r\n    -webkit-transform: rotate(0deg);\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    -webkit-transform: rotate(360deg);\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n/* @media only screen and (max-width: 600px) {\r\n  form {\r\n    width: 80vw;\r\n  }\r\n} */\r\n\r\n/* @import '@/assets/css/main.css' */\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DepositPay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DepositPay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DepositPay.vue?vue&type=template&id=2d59505e&scoped=true&\"\nimport script from \"./DepositPay.vue?vue&type=script&lang=js&\"\nexport * from \"./DepositPay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DepositPay.vue?vue&type=style&index=0&id=2d59505e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d59505e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DepositPay.vue?vue&type=style&index=0&id=2d59505e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DepositPay.vue?vue&type=style&index=0&id=2d59505e&scoped=true&lang=css&\""],"sourceRoot":""}