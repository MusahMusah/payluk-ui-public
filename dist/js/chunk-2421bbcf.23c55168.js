(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2421bbcf"],{"0edb":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vs-row",[n("vs-col",{staticClass:"mx-auto m-20",attrs:{"vs-w":"10",offset:"2"}},[n("form",{attrs:{id:"payment-form"}},[n("div",{attrs:{id:"card-element"}}),n("button",{attrs:{id:"submit"}},[n("div",{staticClass:"spinner hidden",attrs:{id:"spinner"}}),n("span",{attrs:{id:"button-text"}},[t._v("Pay")])]),n("p",{attrs:{id:"card-error",role:"alert"}}),n("p",{staticClass:"result-message hidden"},[t._v("\n        Payment succeeded, see the result in your\n        "),n("a",{attrs:{href:"",target:"_blank"}},[t._v("Stripe dashboard.")]),t._v(" Refresh the page to\n        pay again.\n      ")])])])],1)},r=[],a={data:function(){return{}},mounted:function(){var t=Stripe("pk_test_KPQoeXoc6SUDHanW1BjtpgpS003CqpjqHx"),e=100*this.$route.params.amount,n={items:[{description:"deposit",amount:e}]};document.querySelector("button").disabled=!0,fetch("http://localhost:8080/stripe/invoke",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(e){var n=t.elements(),r={base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{fontFamily:"Arial, sans-serif",color:"#fa755a",iconColor:"#fa755a"}},a=n.create("card",{style:r});a.mount("#card-element"),a.on("change",(function(t){document.querySelector("button").disabled=t.empty,document.querySelector("#card-error").textContent=t.error?t.error.message:""}));var i=document.getElementById("payment-form");i.addEventListener("submit",(function(n){n.preventDefault(),o(t,a,e.clientSecret)}))}));var o=function(t,e,n){a(!0),t.confirmCardPayment(n,{payment_method:{card:e}}).then((function(t){t.error?r(t.error.payment_intent.id):r(t.paymentIntent.id)}))},r=function(t){fetch("http://localhost:8080/payment?paymentIntent="+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){t&&(console.log(t.result.receipt_url),window.location.href="".concat(t.result.receipt_url),a(!1))})),document.querySelector("button").disabled=!0},a=function(t){t?(document.querySelector("button").disabled=!0,document.querySelector("#spinner").classList.remove("hidden"),document.querySelector("#button-text").classList.add("hidden")):(document.querySelector("button").disabled=!1,document.querySelector("#spinner").classList.add("hidden"),document.querySelector("#button-text").classList.remove("hidden"))}}},i=a,s=(n("9bad"),n("2877")),c=Object(s["a"])(i,o,r,!1,null,"beff8246",null);e["default"]=c.exports},"809f":function(t,e,n){},"9bad":function(t,e,n){"use strict";var o=n("809f"),r=n.n(o);r.a}}]);
//# sourceMappingURL=chunk-2421bbcf.23c55168.js.map